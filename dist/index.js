!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.AStar=i():t.AStar=i()}(self,(function(){return(()=>{"use strict";var t={d:(i,o)=>{for(var n in o)t.o(o,n)&&!t.o(i,n)&&Object.defineProperty(i,n,{enumerable:!0,get:o[n]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{Map:()=>c,default:()=>c});const o=["1","2","3","4","5","6","7","8"];function n(t,i){return t.G+i.cost}function e(t,i){const[o,n]=t.coord,[e,s]=i.coord;return Math.abs(o-e)+Math.abs(n-s)}function s(t){let i,o=1/0;for(let[n,e]of t.entries())(!i||e<o)&&(o=e,i=n);return i}var r;!function(t){t[t.TOP=1]="TOP",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.RIGHT=3]="RIGHT",t[t.BOTTOM_RIGHT=4]="BOTTOM_RIGHT",t[t.BOTTOM=5]="BOTTOM",t[t.BOTTOM_LEFT=6]="BOTTOM_LEFT",t[t.LEFT=7]="LEFT",t[t.TOP_LEFT=8]="TOP_LEFT"}(r||(r={})),r.TOP,r.TOP_RIGHT,r.RIGHT,r.BOTTOM_RIGHT,r.BOTTOM,r.BOTTOM_LEFT,r.LEFT,r.TOP_LEFT;class a extends class{constructor(t,i,o){this.diagonal=!1,this.coord=t,this.cost=i,void 0!==o&&(this.diagonal=o)}setData(t){void 0!==t.cost&&(this.cost=t.cost),void 0!==t.diagonal&&(this.diagonal=t.diagonal)}}{constructor(){super(...arguments),this.G=0,this.H=1/0}}var d=function(t,i,o,n){return new(o||(o=Promise))((function(e,s){function r(t){try{d(n.next(t))}catch(t){s(t)}}function a(t){try{d(n.throw(t))}catch(t){s(t)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(t){t(i)}))).then(r,a)}d((n=n.apply(t,i||[])).next())}))};class l{constructor(t,i){this.list=[],this.timeout=25,this.timeout=t,this.emit=i}append(t){this.list.push(t)}run(){return d(this,void 0,void 0,(function*(){for(let t of this.list)yield u(this.timeout),this.emit(...t)}))}}function u(t){return d(this,void 0,void 0,(function*(){return new Promise((i=>setTimeout(i,t)))}))}class c extends class{constructor(){this.eList={}}on(t,i){this.eList[t]?this.eList[t].push(i):this.eList[t]=[i]}un(t,i){this.eList[t]&&(this.eList[t]=this.eList[t].filter((t=>t!==i)))}emit(t,i){this.eList[t]&&this.eList[t].forEach((t=>{t(i)}))}}{constructor(t){var i;super(),this.map=[],this.bridge=new l(10,((...t)=>this._emit(...t))),this.find=(i=this.bridge,function(t,[r,a],[d,l]){function u(t){for(let r of o){const o=Number(r)%2==0;if(!t[r]||!t[r].diagonal&&o||p.has(t[r])||t[r].cost===1/0)continue;const a=t[r];if(T.has(a)){const i=a.parent;if(t.G>=i.G)continue}a.G=o?(s=a,t.G+1.4*s.cost):n(t,a),a.H=e(a,h);const d=a.G+a.H;T.set(a,d),a.parent=t,i&&i.append(["onPutOpenlist",a.coord])}var s;T.delete(t),p.set(t,""),i&&i.append(["onPutCloselist",t.coord])}const c=t[r][a];let h=t[d][l];const T=new Map;T.set(c,0);const p=new Map;for(u(c);!p.has(h);)u(s(T));for(;h.parent;)i&&i.append(["onRoute",h.coord]),h=h.parent;i&&i.append(["onRoute",h.coord]),i&&i.run()}),this.initMap(t)}static notInRange(t,i){return new RangeError(`x:${t},y:${i},not in range`)}_emit(t,i){this.emit(t,i)}initMap(t){var i,o,n,e,s,d,l,u,c,h,T,p,f,v,O,m;for(let i=0;i<t.length;i++){this.map[i]=[];for(let o=0;o<t[i].length;o++)this.map[i][o]=new a([i,o],t[i][o],!0)}for(let t=0;t<this.map.length;t++)for(let a=0;a<this.map[t].length;a++){const M=this.map[t][a];M[r.TOP]=null===(o=null===(i=this.map)||void 0===i?void 0:i[t-1])||void 0===o?void 0:o[a],M[r.TOP_RIGHT]=null===(e=null===(n=this.map)||void 0===n?void 0:n[t-1])||void 0===e?void 0:e[a+1],M[r.RIGHT]=null===(d=null===(s=this.map)||void 0===s?void 0:s[t])||void 0===d?void 0:d[a+1],M[r.BOTTOM_RIGHT]=null===(u=null===(l=this.map)||void 0===l?void 0:l[t+1])||void 0===u?void 0:u[a+1],M[r.BOTTOM]=null===(h=null===(c=this.map)||void 0===c?void 0:c[t+1])||void 0===h?void 0:h[a],M[r.BOTTOM_LEFT]=null===(p=null===(T=this.map)||void 0===T?void 0:T[t+1])||void 0===p?void 0:p[a-1],M[r.LEFT]=null===(v=null===(f=this.map)||void 0===f?void 0:f[t])||void 0===v?void 0:v[a-1],M[r.TOP_LEFT]=null===(m=null===(O=this.map)||void 0===O?void 0:O[t+1])||void 0===m?void 0:m[a-1]}}setNode(t,i,o){this.map[t][i].setData(o)}isInMap(t,i){return i in this.map&&t in this.map[0]}}return i})()}));