!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.AStar=o():t.AStar=o()}(self,(function(){return(()=>{"use strict";var t={d:(o,n)=>{for(var i in n)t.o(n,i)&&!t.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:n[i]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};t.r(o),t.d(o,{Map:()=>T,find:()=>c});var n=function(t,o,n,i){return new(n||(n=Promise))((function(e,s){function r(t){try{d(i.next(t))}catch(t){s(t)}}function a(t){try{d(i.throw(t))}catch(t){s(t)}}function d(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(t){t(o)}))).then(r,a)}d((i=i.apply(t,o||[])).next())}))};function i(t){return n(this,void 0,void 0,(function*(){return new Promise((o=>setTimeout(o,t)))}))}window.emit=function(t,o){window.PubSub.publish(t,o)};const e=new class{constructor(t){this.list=[],this.timeout=25,this.timeout=t}append(t){this.list.push(t)}run(){return n(this,void 0,void 0,(function*(){for(let t of this.list)yield i(this.timeout),window.emit(...t)}))}}(10),s=["1","2","3","4","5","6","7","8"];function r(t,o){return t.G+o.cost}function a(t,o){const[n,i]=t.coord,[e,s]=o.coord;return Math.abs(n-e)+Math.abs(i-s)}function d(t){let o,n=1/0;for(let[i,e]of t.entries())(!o||e<n)&&(n=e,o=i);return o}var u;!function(t){t[t.TOP=1]="TOP",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.RIGHT=3]="RIGHT",t[t.BOTTOM_RIGHT=4]="BOTTOM_RIGHT",t[t.BOTTOM=5]="BOTTOM",t[t.BOTTOM_LEFT=6]="BOTTOM_LEFT",t[t.LEFT=7]="LEFT",t[t.TOP_LEFT=8]="TOP_LEFT"}(u||(u={})),u.TOP,u.TOP_RIGHT,u.RIGHT,u.BOTTOM_RIGHT,u.BOTTOM,u.BOTTOM_LEFT,u.LEFT,u.TOP_LEFT;class l extends class{constructor(t,o,n){this.diagonal=!1,this.coord=t,this.cost=o,void 0!==n&&(this.diagonal=n)}setData(t){void 0!==t.cost&&(this.cost=t.cost),void 0!==t.diagonal&&(this.diagonal=t.diagonal)}}{constructor(){super(...arguments),this.G=0,this.H=1/0}}const c=function(t,[o,n],[i,u]){function l(t){for(let n of s){const i=Number(n)%2==0;if(!t[n]||!t[n].diagonal&&i||h.has(t[n])||t[n].cost===1/0)continue;const s=t[n];if(p.has(s)){const o=s.parent;if(t.G>=o.G)continue}s.G=i?(o=s,t.G+1.4*o.cost):r(t,s),s.H=a(s,T);const d=s.G+s.H;p.set(s,d),s.parent=t,window&&e.append(["putopen",s.coord])}var o;p.delete(t),h.set(t,""),window&&e.append(["putclose",t.coord])}const c=t[o][n];let T=t[i][u];const p=new Map;p.set(c,0);const h=new Map;for(l(c);!h.has(T);)l(d(p));for(;T.parent;)window&&e.append(["route",T.coord]),T=T.parent;window&&e.append(["route",T.coord]),e.run()};class T{constructor(t){this.map=[],this.initMap(t),window&&window.PubSub.publish("newmap",t)}static notInRange(t,o){return new RangeError(`x:${t},y:${o},not in range`)}initMap(t){var o,n,i,e,s,r,a,d,c,T,p,h,f,v,O,m;for(let o=0;o<t.length;o++){this.map[o]=[];for(let n=0;n<t[o].length;n++)this.map[o][n]=new l([o,n],t[o][n],!0)}for(let t=0;t<this.map.length;t++)for(let l=0;l<this.map[t].length;l++){const w=this.map[t][l];w[u.TOP]=null===(n=null===(o=this.map)||void 0===o?void 0:o[t-1])||void 0===n?void 0:n[l],w[u.TOP_RIGHT]=null===(e=null===(i=this.map)||void 0===i?void 0:i[t-1])||void 0===e?void 0:e[l+1],w[u.RIGHT]=null===(r=null===(s=this.map)||void 0===s?void 0:s[t])||void 0===r?void 0:r[l+1],w[u.BOTTOM_RIGHT]=null===(d=null===(a=this.map)||void 0===a?void 0:a[t+1])||void 0===d?void 0:d[l+1],w[u.BOTTOM]=null===(T=null===(c=this.map)||void 0===c?void 0:c[t+1])||void 0===T?void 0:T[l],w[u.BOTTOM_LEFT]=null===(h=null===(p=this.map)||void 0===p?void 0:p[t+1])||void 0===h?void 0:h[l-1],w[u.LEFT]=null===(v=null===(f=this.map)||void 0===f?void 0:f[t])||void 0===v?void 0:v[l-1],w[u.TOP_LEFT]=null===(m=null===(O=this.map)||void 0===O?void 0:O[t+1])||void 0===m?void 0:m[l-1]}}setNode(t,o,n){this.map[t][o].setData(n)}isInMap(t,o){return o in this.map&&t in this.map[0]}}return o})()}));